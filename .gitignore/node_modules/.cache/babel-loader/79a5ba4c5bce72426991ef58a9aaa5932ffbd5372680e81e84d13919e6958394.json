{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{VerticalGraph}from\"./VerticalGraph\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const API=process.env.REACT_APP_API_URL;const Holdings=()=>{const[allHoldings,setAllHoldings]=useState([]);useEffect(()=>{axios.get(\"\".concat(API,\"/api/holdings\")).then(res=>{setAllHoldings(res.data||[]);}).catch(err=>{console.error(\"Holdings API error:\",err);});},[]);/* ================= GRAPH DATA ================= */const data={labels:allHoldings.map(stock=>stock.name),datasets:[{label:\"Stock Price\",data:allHoldings.map(stock=>{var _stock$price;return(_stock$price=stock.price)!==null&&_stock$price!==void 0?_stock$price:0;}),backgroundColor:\"rgba(65, 132, 243, 0.6)\"}]};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"holdings-container\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"title\",children:[\"Holdings (\",allHoldings.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"order-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Instrument\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Qty.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Avg. cost\"}),/*#__PURE__*/_jsx(\"th\",{children:\"LTP\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cur. val\"}),/*#__PURE__*/_jsx(\"th\",{children:\"P&L\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Net chg.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Day chg.\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:allHoldings.map(stock=>{var _stock$qty,_stock$avg,_stock$price2,_stock$day;const qty=(_stock$qty=stock.qty)!==null&&_stock$qty!==void 0?_stock$qty:0;const avg=(_stock$avg=stock.avg)!==null&&_stock$avg!==void 0?_stock$avg:0;const price=(_stock$price2=stock.price)!==null&&_stock$price2!==void 0?_stock$price2:0;const curValue=price*qty;const pnl=curValue-avg*qty;const profClass=pnl>=0?\"profit\":\"loss\";const dayClass=(_stock$day=stock.day)!==null&&_stock$day!==void 0&&_stock$day.startsWith(\"-\")?\"loss\":\"profit\";return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:stock.name}),/*#__PURE__*/_jsx(\"td\",{children:qty}),/*#__PURE__*/_jsx(\"td\",{children:avg.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:price.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:curValue.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:profClass,children:pnl.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:profClass,children:stock.net}),/*#__PURE__*/_jsx(\"td\",{className:dayClass,children:stock.day})]},stock._id);})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"holdings-container\",children:/*#__PURE__*/_jsx(VerticalGraph,{data:data})})]});};export default Holdings;","map":{"version":3,"names":["React","useState","useEffect","axios","VerticalGraph","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","API","process","env","REACT_APP_API_URL","Holdings","allHoldings","setAllHoldings","get","concat","then","res","data","catch","err","console","error","labels","map","stock","name","datasets","label","_stock$price","price","backgroundColor","children","className","length","_stock$qty","_stock$avg","_stock$price2","_stock$day","qty","avg","curValue","pnl","profClass","dayClass","day","startsWith","toFixed","net","_id"],"sources":["C:/Users/hp/zerodha/dashboard/src/components/Holdings.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { VerticalGraph } from \"./VerticalGraph\";\n\nconst API = process.env.REACT_APP_API_URL;\n\nconst Holdings = () => {\n  const [allHoldings, setAllHoldings] = useState([]);\n\n  useEffect(() => {\n    axios\n      .get(`${API}/api/holdings`)\n      .then((res) => {\n        setAllHoldings(res.data || []);\n      })\n      .catch((err) => {\n        console.error(\"Holdings API error:\", err);\n      });\n  }, []);\n\n  /* ================= GRAPH DATA ================= */\n  const data = {\n    labels: allHoldings.map((stock) => stock.name),\n    datasets: [\n      {\n        label: \"Stock Price\",\n        data: allHoldings.map((stock) => stock.price ?? 0),\n        backgroundColor: \"rgba(65, 132, 243, 0.6)\",\n      },\n    ],\n  };\n\n  return (\n    <>\n      {/* ================= HOLDINGS TABLE ================= */}\n      <div className=\"holdings-container\">\n        <h3 className=\"title\">Holdings ({allHoldings.length})</h3>\n\n        <div className=\"order-table\">\n          <table>\n            <thead>\n              <tr>\n                <th>Instrument</th>\n                <th>Qty.</th>\n                <th>Avg. cost</th>\n                <th>LTP</th>\n                <th>Cur. val</th>\n                <th>P&amp;L</th>\n                <th>Net chg.</th>\n                <th>Day chg.</th>\n              </tr>\n            </thead>\n\n            <tbody>\n              {allHoldings.map((stock) => {\n                const qty = stock.qty ?? 0;\n                const avg = stock.avg ?? 0;\n                const price = stock.price ?? 0;\n\n                const curValue = price * qty;\n                const pnl = curValue - avg * qty;\n                const profClass = pnl >= 0 ? \"profit\" : \"loss\";\n                const dayClass = stock.day?.startsWith(\"-\") ? \"loss\" : \"profit\";\n\n                return (\n                  <tr key={stock._id}>\n                    <td>{stock.name}</td>\n                    <td>{qty}</td>\n                    <td>{avg.toFixed(2)}</td>\n                    <td>{price.toFixed(2)}</td>\n                    <td>{curValue.toFixed(2)}</td>\n                    <td className={profClass}>{pnl.toFixed(2)}</td>\n                    <td className={profClass}>{stock.net}</td>\n                    <td className={dayClass}>{stock.day}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* ================= GRAPH ================= */}\n      <div className=\"holdings-container\">\n        <VerticalGraph data={data} />\n      </div>\n    </>\n  );\n};\n\nexport default Holdings;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}