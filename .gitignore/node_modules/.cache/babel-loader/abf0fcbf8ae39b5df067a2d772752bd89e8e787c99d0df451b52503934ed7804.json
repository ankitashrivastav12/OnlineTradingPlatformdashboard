{"ast":null,"code":"import React,{useState,useContext}from\"react\";import axios from\"axios\";import GeneralContext from\"./GeneralContext\";import{Tooltip,Grow}from\"@mui/material\";import{BarChartOutlined,KeyboardArrowDown,KeyboardArrowUp,MoreHoriz}from\"@mui/icons-material\";import{watchlist}from\"../data/data\";import{DoughnutChart}from\"./DoughnoutChart\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const labels=watchlist.map(stock=>stock.name);const WatchList=()=>{const data={labels,datasets:[{label:\"Price\",data:watchlist.map(stock=>stock.price),backgroundColor:[\"rgba(255, 99, 132, 0.5)\",\"rgba(54, 162, 235, 0.5)\",\"rgba(255, 206, 86, 0.5)\",\"rgba(75, 192, 192, 0.5)\",\"rgba(153, 102, 255, 0.5)\",\"rgba(255, 159, 64, 0.5)\"],borderWidth:1}]};return/*#__PURE__*/_jsxs(\"div\",{className:\"watchlist-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search eg: infy, bse, nifty fut weekly\",className:\"search\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"counts\",children:[watchlist.length,\" / 50\"]})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"list\",children:watchlist.map((stock,index)=>/*#__PURE__*/_jsx(WatchListItem,{stock:stock},index))}),/*#__PURE__*/_jsx(DoughnutChart,{data:data})]});};export default WatchList;/* -------------------- WatchListItem -------------------- */const WatchListItem=_ref=>{let{stock}=_ref;const[showActions,setShowActions]=useState(false);return/*#__PURE__*/_jsxs(\"li\",{onMouseEnter:()=>setShowActions(true),onMouseLeave:()=>setShowActions(false),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"p\",{className:stock.isDown?\"down\":\"up\",children:stock.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"itemInfo\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"percent\",children:stock.percent}),stock.isDown?/*#__PURE__*/_jsx(KeyboardArrowDown,{className:\"down\"}):/*#__PURE__*/_jsx(KeyboardArrowUp,{className:\"up\"}),/*#__PURE__*/_jsx(\"span\",{className:\"price\",children:stock.price})]})]}),showActions&&/*#__PURE__*/_jsx(WatchListActions,{stock:stock})]});};/* -------------------- WatchListActions -------------------- */const WatchListActions=_ref2=>{let{stock}=_ref2;const generalContext=useContext(GeneralContext);const handleBuyClick=()=>{// 1️⃣ Open Buy window (existing behavior)\ngeneralContext.openBuyWindow(stock.name);// 2️⃣ Save order to localStorage (demo backend)\nconst newOrder={id:Date.now(),stock:stock.name,price:stock.price,quantity:1,type:\"BUY\",time:new Date().toLocaleString()};const existingOrders=JSON.parse(localStorage.getItem(\"orders\"))||[];localStorage.setItem(\"orders\",JSON.stringify([...existingOrders,newOrder]));};return/*#__PURE__*/_jsxs(\"span\",{className:\"actions\",children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Buy\",placement:\"top\",arrow:true,TransitionComponent:Grow,children:/*#__PURE__*/_jsx(\"button\",{className:\"buy p-5 mx-5\",onClick:handleBuyClick,children:\"Buy\"})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Sell\",placement:\"top\",arrow:true,TransitionComponent:Grow,children:/*#__PURE__*/_jsx(\"button\",{className:\"sell p-5\",children:\"Sell\"})})]});};","map":{"version":3,"names":["React","useState","useContext","axios","GeneralContext","Tooltip","Grow","BarChartOutlined","KeyboardArrowDown","KeyboardArrowUp","MoreHoriz","watchlist","DoughnutChart","jsx","_jsx","jsxs","_jsxs","labels","map","stock","name","WatchList","data","datasets","label","price","backgroundColor","borderWidth","className","children","type","placeholder","length","index","WatchListItem","_ref","showActions","setShowActions","onMouseEnter","onMouseLeave","isDown","percent","WatchListActions","_ref2","generalContext","handleBuyClick","openBuyWindow","newOrder","id","Date","now","quantity","time","toLocaleString","existingOrders","JSON","parse","localStorage","getItem","setItem","stringify","title","placement","arrow","TransitionComponent","onClick"],"sources":["C:/Users/hp/zerodha/dashboard/src/components/WatchList.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport GeneralContext from \"./GeneralContext\";\nimport { Tooltip, Grow } from \"@mui/material\";\nimport {\n  BarChartOutlined,\n  KeyboardArrowDown,\n  KeyboardArrowUp,\n  MoreHoriz,\n} from \"@mui/icons-material\";\n\nimport { watchlist } from \"../data/data\";\nimport { DoughnutChart } from \"./DoughnoutChart\";\n\nconst labels = watchlist.map((stock) => stock.name);\n\nconst WatchList = () => {\n  const data = {\n    labels,\n    datasets: [\n      {\n        label: \"Price\",\n        data: watchlist.map((stock) => stock.price),\n        backgroundColor: [\n          \"rgba(255, 99, 132, 0.5)\",\n          \"rgba(54, 162, 235, 0.5)\",\n          \"rgba(255, 206, 86, 0.5)\",\n          \"rgba(75, 192, 192, 0.5)\",\n          \"rgba(153, 102, 255, 0.5)\",\n          \"rgba(255, 159, 64, 0.5)\",\n        ],\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  return (\n    <div className=\"watchlist-container\">\n      <div className=\"search-container\">\n        <input\n          type=\"text\"\n          placeholder=\"Search eg: infy, bse, nifty fut weekly\"\n          className=\"search\"\n        />\n        <span className=\"counts\">{watchlist.length} / 50</span>\n      </div>\n\n      <ul className=\"list\">\n        {watchlist.map((stock, index) => (\n          <WatchListItem stock={stock} key={index} />\n        ))}\n      </ul>\n\n      <DoughnutChart data={data} />\n    </div>\n  );\n};\n\nexport default WatchList;\n\n/* -------------------- WatchListItem -------------------- */\n\nconst WatchListItem = ({ stock }) => {\n  const [showActions, setShowActions] = useState(false);\n\n  return (\n    <li\n      onMouseEnter={() => setShowActions(true)}\n      onMouseLeave={() => setShowActions(false)}\n    >\n      <div className=\"item\">\n        <p className={stock.isDown ? \"down\" : \"up\"}>{stock.name}</p>\n\n        <div className=\"itemInfo\">\n          <span className=\"percent\">{stock.percent}</span>\n          {stock.isDown ? (\n            <KeyboardArrowDown className=\"down\" />\n          ) : (\n            <KeyboardArrowUp className=\"up\" />\n          )}\n          <span className=\"price\">{stock.price}</span>\n        </div>\n      </div>\n\n      {showActions && <WatchListActions stock={stock} />}\n    </li>\n  );\n};\n\n/* -------------------- WatchListActions -------------------- */\n\nconst WatchListActions = ({ stock }) => {\n  const generalContext = useContext(GeneralContext);\n\n  const handleBuyClick = () => {\n    // 1️⃣ Open Buy window (existing behavior)\n    generalContext.openBuyWindow(stock.name);\n\n    // 2️⃣ Save order to localStorage (demo backend)\n    const newOrder = {\n      id: Date.now(),\n      stock: stock.name,\n      price: stock.price,\n      quantity: 1,\n      type: \"BUY\",\n      time: new Date().toLocaleString(),\n    };\n\n    const existingOrders =\n      JSON.parse(localStorage.getItem(\"orders\")) || [];\n\n    localStorage.setItem(\n      \"orders\",\n      JSON.stringify([...existingOrders, newOrder])\n    );\n  };\n\n  return (\n    <span className=\"actions\">\n      <Tooltip\n        title=\"Buy\"\n        placement=\"top\"\n        arrow\n        TransitionComponent={Grow}\n      >\n        <button className=\"buy p-5 mx-5\" onClick={handleBuyClick}>\n          Buy\n        </button>\n      </Tooltip>\n\n      <Tooltip\n        title=\"Sell\"\n        placement=\"top\"\n        arrow\n        TransitionComponent={Grow}\n      >\n        <button className=\"sell p-5\">Sell</button>\n      </Tooltip>\n\n    </span>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}